DROP DATABASE IF EXISTS people;
CREATE DATABASE people
        CHARACTER SET utf8;
USE people;



CREATE TABLE admin (
        admin_id INT NOT NULL AUTO_INCREMENT,
        username VARCHAR(50),
        password VARCHAR(50),
	user_id INT,
	active BOOLEAN DEFAULT 1,
        PRIMARY KEY(admin_id)
);

CREATE TABLE themes(
        theme_id INT NOT NULL AUTO_INCREMENT,
        name VARCHAR(50),
        short_name VARCHAR(8),
        leader_id INT,
        secretary_id INT,
        theme_active BOOLEAN DEFAULT 1,
        PRIMARY KEY(theme_id)
);

CREATE TABLE type(
        type_id INT NOT NULL AUTO_INCREMENT,
        name VARCHAR(50),
        type_active BOOLEAN DEFAULT 1,
        PRIMARY KEY(type_id)
);


CREATE TABLE users (
        user_id INT NOT NULL AUTO_INCREMENT,
        first_name VARCHAR(30),
        last_name VARCHAR(30),
	email VARCHAR(50),
	netid VARCHAR(8),
	uin VARCHAR(9),
	gender VARCHAR(1),
	default_address VARCHAR(4),
	theme_id INT REFERENCES themes(theme_id),
	other_theme_id INT ,
        supervisor_id INT REFERENCES users(user_id),
	type_id INT REFERENCES type(type_id),
	dept_id INT REFERENCES department(dept_id),
	key_deposit BOOLEAN DEFAULT 0,
	prox_card BOOLEAN DEFAULT 0,
	safety_training BOOLEAN DEFAULT 0,	
	start_date DATE,
	end_date DATE,
	expected_grad VARCHAR(15),
	reason_leaving TEXT(100),
        user_time_created TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
        user_enabled BOOLEAN DEFAULT 1,
	admin BOOLEAN DEFAULT 0,
        PRIMARY KEY(user_id)
);



CREATE TABLE address(
	address_id INT NOT NULL AUTO_INCREMENT,
	user_id INT REFERENCES users(user_id),
	type VARCHAR(5),
	address1 VARCHAR(150),
	address2 VARCHAR(50),
	city VARCHAR(30),
	state VARCHAR(2),
	zip VARCHAR(5),
	country VARCHAR(50),	
	forward BOOLEAN DEFAULT 0,
        PRIMARY KEY(address_id)
);

CREATE TABLE key_info(
	keyinfo_id INT NOT NULL AUTO_INCREMENT,
	user_id INT,
	key_id VARCHAR(10),	
	date_issued DATE,
	date_returned DATE,
	return_condition TEXT(50),
	paid BOOLEAN DEFAULT 0,
	payment_returned BOOLEAN DEFAULT 0,
	key_active BOOLEAN DEFAULT 1,
        PRIMARY KEY(keyinfo_id)
);

CREATE TABLE key_list(
	key_id INT NOT NULL AUTO_INCREMENT,
	key_name VARCHAR(20),
	key_room VARCHAR(10),
	key_active BOOLEAN DEFAULT 1,
        PRIMARY KEY(key_id)
);

CREATE TABLE phone(
	phone_id INT NOT NULL AUTO_INCREMENT,
	user_id INT REFERENCES users(user_id),
	igb VARCHAR(14),
	dept VARCHAR(14),
	cell VARCHAR(14),
	fax VARCHAR(14),
	other VARCHAR(14),
	fwd VARCHAR(20),
	fwd_type VARCHAR(10),
        PRIMARY KEY(phone_id)
);

CREATE TABLE department(
        dept_id INT NOT NULL AUTO_INCREMENT,
	dept_code varchar(4),
	name varchar(50),
	short_name varchar(20),
	address1 varchar(50),
	address2 varchar(30),
	city varchar(20),
	state varchar(2),
	zip varchar(5),
        PRIMARY KEY(dept_id)
);


CREATE TABLE key(
	key_id INT NOT NULL AUTO_INCREMENT,
	user_id INT REFERENCES users(user_id),
	room VARCHAR(10),
	borrowed DATE,
	returned DATE,
        PRIMARY KEY(key_id)
);

CREATE TABLE prox(
	prox_id INT NOT NULL AUTO_INCREMENT,
	user_id INT REFERENCES users(user_id),
	?
        PRIMARY KEY(prox_id)
);

